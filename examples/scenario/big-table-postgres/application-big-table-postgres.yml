r2dbc:
  datasources:
    reactive-source:
      url: r2dbc:pool:postgresql://source-db:5432/db
      username: user
      password: password
      options: {}
    reactive-target:
      url: r2dbc:pool:postgresql://target-db:5432/db
      username: user
      password: password
      options: {}
reconciliation:
  datasets:
    raw:
      source:
        dataSourceRef: reactive-source
        query: >
          select id as MigrationKey, *
          from big_table
      target:
        dataSourceRef: reactive-target
        query: >
          select id as MigrationKey, *
          from big_table
    counts:
      source:
        dataSourceRef: reactive-source
        query: >
          select 'Num rows' as MigrationKey, count(*) from big_table
      target :
        dataSourceRef: reactive-target
        query: >
          select 'Num rows' as MigrationKey, count(*) from big_table
